spring.application.name=RedSource

# JWT Properties
redsource.app.jwtSecret=${JWT_SECRET:8Zz5tw0Ionm3XPZZfN0NOml3z9FMfmpgXwovR9fp6ryDIoGRM8EPHYC5wgvQqeSA}
redsource.app.jwtExpirationMs=${JWT_EXPIRATION_MS:3600000}
redsource.app.refreshTokenExpirationMs=${REFRESH_TOKEN_EXPIRATION_MS:604800000}

# CORS Configuration
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,https://bloodbank-frontend.vercel.app}

# MongoDB Configuration - Use MongoDB Atlas URI
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://bloodbank-admin:kHtYPU4TiXKfGISW@bloodbank-cluster.dihafhl.mongodb.net/bloodbank?retryWrites=true&w=majority&appName=bloodbank-cluster}
# Fallback for Railway deployment issues
spring.data.mongodb.database=${MONGODB_DATABASE:bloodbank}
spring.data.mongodb.auto-index-creation=true
# Allow app to start even if MongoDB is not available initially
spring.data.mongodb.connect-timeout=5000
spring.data.mongodb.socket-timeout=5000
# Disable MongoDB health check to allow app startup without DB
management.health.mongo.enabled=false
# Disable all health checks that might fail during startup
management.health.defaults.enabled=false
management.health.diskspace.enabled=false

# Debug MongoDB connection
logging.level.org.springframework.data.mongodb=DEBUG
logging.level.com.mongodb=DEBUG
logging.level.RedSource.services.TokenService=DEBUG
logging.level.RedSource.controllers.AuthController=DEBUG

# Server Configuration - Railway provides PORT
server.port=${PORT:8080}

# Logging Configuration
logging.level.org.springframework.data.mongodb.core.MongoTemplate=INFO
logging.level.org.springframework.data.mongodb.repository=INFO
logging.level.bloodbank=DEBUG
logging.level.org.springframework.boot.autoconfigure=INFO
logging.level.org.springframework.context=INFO

# AWS SNS Configuration
aws.region=${AWS_REGION:ap-northeast-3}
aws.sns.access-key=${AWS_SNS_ACCESS_KEY:dummy-access-key}
aws.sns.secret-key=${AWS_SNS_SECRET_KEY:dummy-secret-key}

# OTP Configuration
otp.expiration.minutes=${OTP_EXPIRATION_MINUTES:5}
otp.length=${OTP_LENGTH:6}

# SMS Configuration
sms.testing.mode=${SMS_TESTING_MODE:true}

# File Upload Configuration
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:5MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:6MB}

# Upload directory
file.upload-dir=${UPLOAD_DIR:uploads}

# Health check configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.ping.enabled=true

# Add ping health indicator to readiness group
management.endpoint.health.group.readiness.include=ping
management.endpoint.health.group.readiness.show-details=always
